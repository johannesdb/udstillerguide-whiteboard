{"id":"udstillerguide-whiteboard-05p","title":"Vendor Yjs + y-websocket ESM builds","description":"Download ESM builds af yjs og y-websocket fra npm. Placér i backend/static/js/vendor/yjs.mjs og y-websocket.mjs. Verificér at de kan importeres som ES modules.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:06.418132+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:37:30.273046+01:00","closed_at":"2026-02-11T22:37:30.273046+01:00","close_reason":"Vendored yjs.mjs (93KB) and y-websocket.mjs (14KB) to static/js/vendor/. Added import map in board.html."}
{"id":"udstillerguide-whiteboard-0yz","title":"Persist viewport state (zoom/pan) per board","description":"Camera state (zoom, pan x/y) resets to default (100%, 0,0) on every page load. Should persist per board so users return to their last viewport position. Options: localStorage keyed by boardId, or Yjs awareness/separate Y.Map key.","status":"closed","priority":3,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:14:41.857394+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:18:02.421167+01:00","closed_at":"2026-02-11T23:18:02.421167+01:00","close_reason":"Implemented viewport persistence via localStorage, keyed by boardId. Camera zoom/pan saved with 300ms debounce, restored on board load. Verified working in production."}
{"id":"udstillerguide-whiteboard-1a4","title":"Fix mock server field name mismatches vs types.rs","status":"closed","priority":1,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:16.603665+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:34.262885+01:00","closed_at":"2026-02-12T21:45:34.262885+01:00","close_reason":"Fixed nummer→standnummer, navn→firmanavn, kontakt_email→kontakt+email, parent_id→parent, added children arrays"}
{"id":"udstillerguide-whiteboard-1t1","title":"UG Plugin: Mock messe-data","description":"Opret ug-mock-data.js med demo-data: 2 haller, 8 stande, udstillere, taxonomier","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T02:14:54.906639+01:00","created_by":"johannesdb","updated_at":"2026-02-12T02:15:50.126078+01:00","closed_at":"2026-02-12T02:15:50.126078+01:00","close_reason":"Mock data oprettet med 2 haller, 8 stande, 5 udstillere, taxonomier"}
{"id":"udstillerguide-whiteboard-2c6","title":"Mulighed for at nulstille share-kode på et board","description":"Brugere skal kunne nulstille/regenerere share-koden for et board, så gamle links bliver ugyldige. Nyttigt ved sikkerhedsbehov eller hvis koden er delt med forkerte personer.","status":"closed","priority":3,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:18:56.803191+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:24:59.691029+01:00","closed_at":"2026-02-11T23:24:59.691029+01:00","close_reason":"Done: Added POST /api/boards/:id/share-links/:link_id/regenerate endpoint + Reset button in share dialog. Token regeneration verified working in production."}
{"id":"udstillerguide-whiteboard-2gc","title":"Sticky notes: vælg farve ved oprettelse i chain mode","description":"Når man opretter sticky notes i chain mode, bør man kunne vælge farve for hver sticky note. I dag bruges altid den sidst valgte stickyColor. Tilføj en hurtig farvevælger (f.eks. med tal-genveje 1-5 for forskellige farver) så man kan skifte farve undervejs i chain mode uden at bryde flowet.","status":"tombstone","priority":2,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:39:41.772158+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:41:24.491944+01:00","deleted_at":"2026-02-11T21:41:24.491944+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"udstillerguide-whiteboard-2jq","title":"Rewrite ug-panel.js: connect-form + live data","description":"Omskriv ug-panel.js med tre tilstande: (1) Ikke forbundet — formular med URL/API-nøgle/Messe-ID, (2) Forbundet — live data oversigt med sync/afbryd knapper, (3) Loading. Import fra ug-api.js. Se Task 8 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:12.907777+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:32:56.596245+01:00","closed_at":"2026-02-12T21:32:56.596245+01:00","close_reason":"ug-panel.js omskrevet med 3 tilstande: connect form, connected view, loading","dependencies":[{"issue_id":"udstillerguide-whiteboard-2jq","depends_on_id":"udstillerguide-whiteboard-7t8","type":"blocks","created_at":"2026-02-12T21:16:32.174993+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-2jq","depends_on_id":"udstillerguide-whiteboard-cap","type":"blocks","created_at":"2026-02-12T21:16:32.739902+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-3bm","title":"Fix double-sync in ug-panel.js renderLiveDataOverview","status":"closed","priority":2,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:26.028454+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:35.146537+01:00","closed_at":"2026-02-12T21:45:35.146537+01:00","close_reason":"Thread cachedData through render chain, eliminates double-sync"}
{"id":"udstillerguide-whiteboard-4px","title":"Restrict push endpoint to owner/admin role","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:37.674466+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:35.704456+01:00","closed_at":"2026-02-12T21:45:35.704456+01:00","close_reason":"Added owner/admin role check matching connect/disconnect pattern"}
{"id":"udstillerguide-whiteboard-4wm","title":"Skriv detaljeret implementeringsplan for UG Core integration","description":"Baseret på det godkendte design i docs/plans/2026-02-12-ug-core-integration-design.md, skriv en detaljeret step-by-step implementeringsplan med konkrete tasks. Planen skal dække: 1) Database migration (ug_connections tabel), 2) Backend ug_integration.rs modul med connect/sync/push endpoints, 3) Baggrunds sync-loop (tokio task), 4) Frontend ug-api.js (erstat mock-data), 5) Frontend ug-panel.js (forbind-dialog + sync-status UI), 6) Frontend ug-layout.js (brug API-data), 7) OpenAPI spec til UG Core-teamet, 8) Mock-server til test. Brug superpowers:writing-plans skill.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T13:11:47.006734+01:00","created_by":"johannesdb","updated_at":"2026-02-12T13:24:14.036522+01:00","closed_at":"2026-02-12T13:24:14.036522+01:00","close_reason":"Implementation plan written to docs/plans/2026-02-12-ug-core-integration-impl.md — 12 tasks covering DB migration, backend handlers, sync loop, frontend API client, panel rewrite, mock server, and OpenAPI spec"}
{"id":"udstillerguide-whiteboard-59o","title":"Fix ug-elements.js import: ug-mock-data.js → ug-api.js?v=4","status":"closed","priority":1,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:13.305055+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:33.980706+01:00","closed_at":"2026-02-12T21:45:33.980706+01:00","close_reason":"Switched to ug-api.js?v=4, added ?v=4 to ug-elements.js imports in plugin+layout"}
{"id":"udstillerguide-whiteboard-5g3","title":"Google OAuth login (udover email/password)","description":"Tilføj Google Login som alternativ til email/password auth.\n\n## Krav\n1. Google Cloud Console: Opret OAuth 2.0 credentials (Client ID + Secret)\n2. Backend (Rust/Axum):\n   - GET /api/auth/google → redirect til Google consent screen\n   - GET /api/auth/google/callback → modtag auth code, bytte til tokens, hent brugerinfo, generer JWT\n   - Tilføj oauth2 + reqwest crates\n3. Database:\n   - Udvid users tabel med google_id (nullable)\n   - Gør password_hash nullable (Google-only brugere har ikke password)\n4. Frontend:\n   - 'Log ind med Google' knap på login-siden\n   - Håndter redirect callback og gem JWT token\n5. Edge cases:\n   - Link Google til eksisterende email/password-konto\n   - Bruger der allerede findes med samme email\n\n## Tech\n- oauth2 crate til Rust OAuth flow\n- reqwest til Google API kald\n- Eksisterende JWT-system genbruges efter Google-validering","status":"closed","priority":2,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:19:53.738323+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:32:11.087696+01:00","closed_at":"2026-02-11T23:32:11.087696+01:00","close_reason":"Done: Google OAuth login implemented with PKCE, CSRF, account linking, optional toggle via env vars"}
{"id":"udstillerguide-whiteboard-6ku","title":"UG Plugin: Auto-layout gulvplan + hierarki","description":"Opret ug-layout.js der auto-genererer spatial gulvplan og hierarki-diagram fra messe-data","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T02:14:57.670515+01:00","created_by":"johannesdb","updated_at":"2026-02-12T02:17:51.7221+01:00","closed_at":"2026-02-12T02:17:51.7221+01:00","close_reason":"Gulvplan + hierarki layout generator oprettet med importMesseData()","dependencies":[{"issue_id":"udstillerguide-whiteboard-6ku","depends_on_id":"udstillerguide-whiteboard-1t1","type":"blocks","created_at":"2026-02-12T02:15:07.812577+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-6ku","depends_on_id":"udstillerguide-whiteboard-qtg","type":"blocks","created_at":"2026-02-12T02:15:07.954893+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-6yi","title":"Add serde(skip_serializing) to UgConnection.api_key","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:22.914275+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:34.900308+01:00","closed_at":"2026-02-12T21:45:34.900308+01:00","close_reason":"Added #[serde(skip_serializing)] to api_key field"}
{"id":"udstillerguide-whiteboard-782","title":"Multi-method auth: Google OAuth + Magic Link + Password","description":"Udvid whiteboard auth-systemet til at understøtte tre login-metoder:\n\n## Auth-metoder per rolle:\n- **UG admin**: Google OAuth (email whitelist i env ADMIN_EMAILS)\n- **Board-ejere/arrangører**: Google OAuth + Magic Link + Password  \n- **Alm. brugere**: Magic Link + Password\n\n## Database-ændringer (ny migration):\n- Tilføj auth_method kolonne til users (password, google_oauth, magic_link)\n- Gør password_hash NULLABLE (Google-brugere har intet password)\n- Tilføj google_sub TEXT UNIQUE\n- Tilføj role kolonne til users (admin, editor, viewer)\n- Ny tabel: magic_link_tokens (id, user_id, token TEXT UNIQUE, expires_at, used_at)\n\n## Nye Rust-moduler:\n- src/auth/oauth.rs — Google OAuth flow (auth URL, callback, token exchange)\n- src/auth/magic_link.rs — Token generation, verification\n- Udvid Claims struct med role felt\n- Udvid middleware til at håndtere alle tre metoder\n\n## Endpoints:\n- GET /auth/google — Redirect til Google\n- GET /auth/google/callback — Exchange + JWT\n- POST /auth/magic-link — Send magic link\n- GET /auth/magic-link/verify?token=xxx — Verificer + JWT\n- POST /auth/login — Password login (beholdes)\n\n## Config (.env):\n- GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, GOOGLE_REDIRECT_URI\n- ADMIN_EMAILS=email1,email2\n- MAGIC_LINK_EXPIRY_MINUTES=15\n- SMTP_HOST, SMTP_USER, SMTP_PASSWORD (til magic links)\n\n## Integration med WebSocket:\n- Auth-token skal også valideres på WS-upgrade\n- Eksisterende WS auth skal fortsætte med at virke med nye token-format\n\n## Rule of Five:\n1. OAuth state parameter CSRF-beskyttelse\n2. Magic link single-use + expiry\n3. Password_hash nullable uden at bryde eksisterende brugere\n4. WebSocket auth kompatibel med nye Claims\n5. Board-permissions korrekt koblet til user roles","notes":"TILFØJELSE: Remember Me / Husk Mig funktionalitet\n\n## Implementering:\n- Tilføj remember_me boolean til alle login-endpoints\n- Hvis remember_me=true: refresh_token i httpOnly secure cookie, 30 dages levetid\n- Hvis remember_me=false: kun access_token, 24 timer (som nu)\n- Ny tabel: refresh_tokens (id UUID, user_id UUID FK, token_hash TEXT UNIQUE, expires_at TIMESTAMPTZ, created_at, revoked_at NULLABLE)\n- Token rotation ved hver refresh\n- POST /auth/refresh — exchange refresh_token for ny access_token + roteret refresh_token\n- POST /auth/logout — revoke refresh_token\n- WebSocket reconnect: ved WS disconnect, tjek om refresh_token kan give ny access_token før reconnect\n\n## Sikkerhed:\n- httpOnly + Secure + SameSite=Strict cookies\n- Token hash i DB, aldrig plaintext\n- Token rotation mod replay attacks\n- Max 5 aktive refresh_tokens per bruger\n- Logout revokerer alle tokens","status":"closed","priority":1,"issue_type":"epic","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:30:03.117466+01:00","created_by":"johannesdb","updated_at":"2026-02-12T00:21:53.175627+01:00","closed_at":"2026-02-12T00:21:53.175836+01:00"}
{"id":"udstillerguide-whiteboard-7t8","title":"Frontend: ug-api.js API client","description":"Opret backend/static/js/plugins/ug-api.js med connectUg, disconnectUg, getUgStatus, syncUg, pushChanges + kompatibilitetsfunktioner (STATUS_FARVER, findUdstiller, getStandeForHal, getStatusTaelling). Se Task 6 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:06.806261+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:29:14.80805+01:00","closed_at":"2026-02-12T21:29:14.80805+01:00","close_reason":"ug-api.js oprettet med 5 API funktioner + kompatibilitetshjælpere","dependencies":[{"issue_id":"udstillerguide-whiteboard-7t8","depends_on_id":"udstillerguide-whiteboard-cn5","type":"blocks","created_at":"2026-02-12T21:16:30.69243+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-7vn","title":"Don't advance last_synced until changes are applied","status":"closed","priority":2,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:32.304943+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:35.523778+01:00","closed_at":"2026-02-12T21:45:35.523778+01:00","close_reason":"Commented out update_last_synced until changes are applied"}
{"id":"udstillerguide-whiteboard-97k","title":"OpenAPI 3.0 spec til UG Core-teamet","description":"Skriv docs/ug-core-api-spec.yaml med fuld OpenAPI 3.0 kontrakt: alle endpoints, schemas, security (X-API-Key). Se Task 11 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":3,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:20.024579+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:32:57.007524+01:00","closed_at":"2026-02-12T21:32:57.007524+01:00","close_reason":"docs/ug-core-api-spec.yaml created with full OpenAPI 3.0 contract"}
{"id":"udstillerguide-whiteboard-9b5","title":"End-to-end test af Yjs-migration","description":"Test fuld flow: opret elementer, flyt, slet, reload side (persistence), to browsere (collaboration), cursor-sync via Awareness, reconnect efter disconnect, undo/redo. Verificér at backend logger decoded Y.Map ændringer.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:17.638861+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:50:19.997986+01:00","closed_at":"2026-02-11T22:50:19.997986+01:00","close_reason":"Frontend loads correctly: imports resolve, y-websocket connects, error handling works, UI renders. Rust: 27/27 tests pass. Full e2e with DB requires deployed environment.","dependencies":[{"issue_id":"udstillerguide-whiteboard-9b5","depends_on_id":"udstillerguide-whiteboard-ktc","type":"blocks","created_at":"2026-02-11T22:32:23.719719+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-a3m","title":"Opdater tools.js til ny SyncManager API","description":"Gennemgå tools.js for direkte kald til sync/WebSocket. Opdater til at bruge den nye SyncManager API (addElement/updateElement/removeElement via Y.Map).","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:13.65269+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:39:58.666377+01:00","closed_at":"2026-02-11T22:39:58.666377+01:00","close_reason":"No changes needed - SyncManager API is backward-compatible, tools.js works as-is.","dependencies":[{"issue_id":"udstillerguide-whiteboard-a3m","depends_on_id":"udstillerguide-whiteboard-rny","type":"blocks","created_at":"2026-02-11T22:32:23.287936+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-a6v","title":"DB migration: opret ug_connections tabel","description":"Tilføj CREATE TABLE ug_connections SQL til run_migrations() i backend/src/db/mod.rs. Se Task 1 i docs/plans/2026-02-12-ug-core-integration-impl.md for detaljer.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:52:54.87712+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:25:01.633507+01:00","closed_at":"2026-02-12T21:25:01.633507+01:00","close_reason":"Migration SQL already present in db/mod.rs:101-110, compiles OK"}
{"id":"udstillerguide-whiteboard-aci","title":"UG Core HTTP client + types","description":"Opret backend/src/ug_integration/ med client.rs (UgClient: get_messe, get_full, get_changes, update_stand, update_taxonomi) og types.rs (UgMesse, UgHal, UgStand, UgUdstiller, UgTaxonomi, UgFullResponse, UgChangesResponse). Se Task 3 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:52:59.448207+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:25:01.855538+01:00","closed_at":"2026-02-12T21:25:01.855538+01:00","close_reason":"client.rs, types.rs, mod.rs all implemented matching the plan, registered in main.rs, compiles OK"}
{"id":"udstillerguide-whiteboard-aq7","title":"DB queries: db/ug_connections.rs modul","description":"Opret backend/src/db/ug_connections.rs med UgConnection struct + CRUD queries (create_connection, get_connection, delete_connection, update_last_synced, get_all_active). Registrer i db/mod.rs. Se Task 2 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:52:56.785931+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:32:56.528635+01:00","closed_at":"2026-02-12T21:32:56.528635+01:00","close_reason":"Module already existed with all 5 functions, registered in mod.rs, compiles OK","dependencies":[{"issue_id":"udstillerguide-whiteboard-aq7","depends_on_id":"udstillerguide-whiteboard-a6v","type":"blocks","created_at":"2026-02-12T21:16:27.660086+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-cap","title":"Refactor ug-layout.js: accepter data-parameter","description":"Refaktorér generateGulvplan, generateHierarki og importMesseData til at modtage data som parameter i stedet for at importere MOCK_* konstanter. Skift import fra ug-mock-data.js til ug-api.js. Se Task 7 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:10.040286+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:30:47.802491+01:00","closed_at":"2026-02-12T21:30:47.802491+01:00","close_reason":"ug-layout.js refaktoreret til data-parameter, imports fra ug-api.js","dependencies":[{"issue_id":"udstillerguide-whiteboard-cap","depends_on_id":"udstillerguide-whiteboard-7t8","type":"blocks","created_at":"2026-02-12T21:16:31.172865+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-cn5","title":"Backend API handlers: connect/disconnect/status/sync/push","description":"Opret backend/src/ug_integration/handlers.rs med 5 endpoints: POST connect, DELETE disconnect, GET status, POST sync, POST push. Wire routes i main.rs under protected_routes. Se Task 4 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:01.424953+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:28:28.497044+01:00","closed_at":"2026-02-12T21:28:28.497044+01:00","close_reason":"handlers.rs med 5 endpoints, wired i main.rs, cargo check OK","dependencies":[{"issue_id":"udstillerguide-whiteboard-cn5","depends_on_id":"udstillerguide-whiteboard-aq7","type":"blocks","created_at":"2026-02-12T21:16:28.029662+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-cn5","depends_on_id":"udstillerguide-whiteboard-aci","type":"blocks","created_at":"2026-02-12T21:16:28.799151+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-cop","title":"Add request timeout to UgClient reqwest::Client","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:29.350971+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:35.356092+01:00","closed_at":"2026-02-12T21:45:35.356092+01:00","close_reason":"Added 15s timeout via Client::builder()"}
{"id":"udstillerguide-whiteboard-cyv","title":"Deploy-script bruger VERSION=dev i stedet for git-hash","description":"Docker-buildet erstatter ?v=X med ?v=VERSION i alle JS/CSS-filer, men deploy.sh sætter ikke GIT_HASH environment-variablen. Derfor serveres alle filer med ?v=dev, og Cloudflare CDN cacher den gamle version. deploy.sh skal sætte GIT_HASH til git rev-parse --short HEAD så cache-busting virker korrekt.","status":"closed","priority":2,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:50:14.77028+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:52:35.403001+01:00","closed_at":"2026-02-11T21:52:35.403001+01:00","close_reason":"Added GIT_HASH export in deploy.sh before docker compose build"}
{"id":"udstillerguide-whiteboard-d9l","title":"URL-encode since parameter in client.rs get_changes()","status":"closed","priority":1,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-12T21:43:19.887433+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:45:34.652179+01:00","closed_at":"2026-02-12T21:45:34.652179+01:00","close_reason":"Changed to reqwest .query() for proper URL encoding"}
{"id":"udstillerguide-whiteboard-e8h","title":"Migrér frontend til ægte Yjs-integration (Y.Doc + Y.Map + y-websocket)","description":"Fjern custom JSON-besked-protokollen (element_add/update/remove/sync_state) og erstat med ægte Yjs-klient i frontend. Elementer skal leve i et Y.Map i en Y.Doc, synkroniseret via y-websocket. Backend har allerede yrs-infrastruktur. Den nuværende løsning (JSON → Y.Map på server) virker men giver ikke CRDT conflict resolution, offline support eller granulær sync. Kodebasen er ny — gør arkitekturen rigtig nu før der bygges mere ovenpå.","status":"closed","priority":1,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:06:49.45617+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:50:20.145784+01:00","closed_at":"2026-02-11T22:50:20.145784+01:00","close_reason":"Migration complete: sync.js rewritten with Y.Doc+Y.Map+y-websocket+Awareness, backend stripped of JSON element handlers, vendor files added, all tests pass."}
{"id":"udstillerguide-whiteboard-edp","title":"E2E smoke test: mock server + whiteboard + connect flow","description":"Manuel verifikation: Start mock server + backend, åbn board, forbind til mock UG Core (localhost:4000), verificer elementer importeres, sync virker, disconnect virker. Se Task 12 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:22.398537+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:53:33.010174+01:00","closed_at":"2026-02-12T21:53:33.010174+01:00","close_reason":"Full E2E flow verified: status→connect→sync→push→disconnect via both curl and browser. Mock server data matches types.rs, all endpoints return 200.","dependencies":[{"issue_id":"udstillerguide-whiteboard-edp","depends_on_id":"udstillerguide-whiteboard-pqt","type":"blocks","created_at":"2026-02-12T21:16:34.436269+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-edp","depends_on_id":"udstillerguide-whiteboard-o2m","type":"blocks","created_at":"2026-02-12T21:16:35.21953+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-edp","depends_on_id":"udstillerguide-whiteboard-h6a","type":"blocks","created_at":"2026-02-12T21:16:35.846158+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-fqu","title":"Opdater canvas.js til Y.Map-integration","description":"Opdater WhiteboardApp så element CRUD går via SyncManager/Y.Map. Tilføj Y.Map observer til at håndtere remote changes. Migrér undo/redo til Y.UndoManager. Vent på initial sync før første render. Behold elements[] array som lokal cache synced via observer.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:11.518634+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:39:58.499679+01:00","closed_at":"2026-02-11T22:39:58.499679+01:00","close_reason":"No changes needed - SyncManager API is backward-compatible, canvas.js works as-is.","dependencies":[{"issue_id":"udstillerguide-whiteboard-fqu","depends_on_id":"udstillerguide-whiteboard-rny","type":"blocks","created_at":"2026-02-11T22:32:23.135434+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-frc","title":"UG Plugin: Hovedregistrering + board.html integration","description":"Opret ug-plugin.js der samler alt og registrerer via WhiteboardPlugins.register(). Tilfoej script-tags i board.html","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T02:15:01.667015+01:00","created_by":"johannesdb","updated_at":"2026-02-12T02:19:15.024205+01:00","closed_at":"2026-02-12T02:19:15.024205+01:00","close_reason":"UG plugin registreret og integreret i board.html med korrekt import-raekkefoelge","dependencies":[{"issue_id":"udstillerguide-whiteboard-frc","depends_on_id":"udstillerguide-whiteboard-qtg","type":"blocks","created_at":"2026-02-12T02:15:08.096579+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-frc","depends_on_id":"udstillerguide-whiteboard-6ku","type":"blocks","created_at":"2026-02-12T02:15:08.244355+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-frc","depends_on_id":"udstillerguide-whiteboard-m34","type":"blocks","created_at":"2026-02-12T02:15:08.383106+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-h6a","title":"Mock UG Core server til dev/test","description":"Opret mock-ug-server/ med Node.js server der implementerer UG Core API-kontrakten (GET /messer/:id, /full, /changes, PUT /stande/:id, /taxonomier/:id). Returnerer statisk testdata. Se Task 10 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:17.786577+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:32:56.786374+01:00","closed_at":"2026-02-12T21:32:56.786374+01:00","close_reason":"mock-ug-server/ created with server.js + package.json, starts on port 4000"}
{"id":"udstillerguide-whiteboard-ifs","title":"Integrate Web Awesome Pro 3 into whiteboard UI","status":"closed","priority":2,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:48:40.880793+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:49:07.090432+01:00","closed_at":"2026-02-11T23:49:07.090432+01:00","close_reason":"Web Awesome Pro 3 integrated across all UI components"}
{"id":"udstillerguide-whiteboard-j55","title":"Web Awesome Pro 3 migration","description":"Migreret fra Shoelace/WA2 til Web Awesome Pro 3. Inkluderer: esbuild bundling (474kb), tooltip for= pattern, wa-alert→wa-callout, wa-range→wa-slider, wa-menu→div, wa-icon-button→wa-button, context menu uden wa-dropdown, cache-bust på vendor assets, autoloader fjernet.","status":"closed","priority":1,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-12T01:29:47.988505+01:00","created_by":"johannesdb","updated_at":"2026-02-12T01:29:52.623102+01:00","closed_at":"2026-02-12T01:29:52.623102+01:00","close_reason":"Fuldt migreret og deployet. Commits: b65802f..d15bb59"}
{"id":"udstillerguide-whiteboard-ktc","title":"Strip JSON element-handlers fra backend","description":"Fjern element_add, element_update, element_remove, sync_state og save_request JSON handlers fra handler.rs. Fjern initial JSON sync_state send. Behold join/leave JSON, binary sync, awareness forwarding, al persistence og auth. Tilføj decoded Y.Map logging.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:15.123922+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:42:46.128176+01:00","closed_at":"2026-02-11T22:42:46.128176+01:00","close_reason":"Stripped JSON element handlers from handler.rs. Added text/binary frame detection for join/leave. Added Y.Map logging. Compiles clean.","dependencies":[{"issue_id":"udstillerguide-whiteboard-ktc","depends_on_id":"udstillerguide-whiteboard-fqu","type":"blocks","created_at":"2026-02-11T22:32:23.432851+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-ktc","depends_on_id":"udstillerguide-whiteboard-a3m","type":"blocks","created_at":"2026-02-11T22:32:23.575636+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-m34","title":"UG Plugin: Sidebar panel UI","description":"Opret ug-panel.js med messe-oversigt, import-knap, stand-liste med filtrering, status-oversigt","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T02:14:59.366862+01:00","created_by":"johannesdb","updated_at":"2026-02-12T02:18:30.83934+01:00","closed_at":"2026-02-12T02:18:30.83934+01:00","close_reason":"Sidebar panel med messe-oversigt, status, hal-liste, stand-filtrering og klik-til-zoom"}
{"id":"udstillerguide-whiteboard-m9m","title":"Elementer persisteres ikke mellem sessions","description":"Når man opretter elementer på et board og derefter lukker og genåbner boardet, er alle elementer væk. Yjs-dokumentet lever kun i hukommelsen og gemmes ikke til databasen. Elementer skal persisteres så de overlever server-genstart og session-skift.","status":"closed","priority":0,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:50:11.076138+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:01:22.438215+01:00","closed_at":"2026-02-11T22:01:22.438215+01:00","close_reason":"Fixed: element operations (add/update/remove/sync_state) now stored in Yjs Y.Map on backend. Existing encode/save/load persistence captures elements automatically. On connect, saved elements sent to client. 27/27 tests pass."}
{"id":"udstillerguide-whiteboard-o2m","title":"Background sync loop (tokio task, 30s polling)","description":"Opret backend/src/ug_integration/sync_loop.rs med spawn_sync_loop() der poller UG Core hvert 30. sekund for alle boards med sync_enabled=true. Spawn i main.rs. Se Task 5 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:03.882164+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:27:55.335204+01:00","closed_at":"2026-02-12T21:27:55.335204+01:00","close_reason":"sync_loop.rs oprettet, spawned i main.rs, cargo check OK","dependencies":[{"issue_id":"udstillerguide-whiteboard-o2m","depends_on_id":"udstillerguide-whiteboard-aq7","type":"blocks","created_at":"2026-02-12T21:16:29.313831+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-o2m","depends_on_id":"udstillerguide-whiteboard-aci","type":"blocks","created_at":"2026-02-12T21:16:30.341075+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-pqt","title":"Update ug-plugin.js: brug API sync","description":"Opdater ug-plugin.js til at importere fra ug-api.js og ug-layout.js (med data-param). Tool onDown bruger syncUg() + importMesseData(app, data). Se Task 9 i docs/plans/2026-02-12-ug-core-integration-impl.md.","status":"closed","priority":2,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T19:53:15.019428+01:00","created_by":"johannesdb","updated_at":"2026-02-12T21:32:56.774068+01:00","closed_at":"2026-02-12T21:32:56.774068+01:00","close_reason":"ug-plugin.js opdateret til API sync","dependencies":[{"issue_id":"udstillerguide-whiteboard-pqt","depends_on_id":"udstillerguide-whiteboard-cap","type":"blocks","created_at":"2026-02-12T21:16:33.167418+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-pqt","depends_on_id":"udstillerguide-whiteboard-2jq","type":"blocks","created_at":"2026-02-12T21:16:33.76454+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-qtg","title":"UG Plugin: Custom element render/hitTest","description":"Opret ug-elements.js med render og hitTest for ug-hal, ug-stand, ug-udstiller typer","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-12T02:14:55.980497+01:00","created_by":"johannesdb","updated_at":"2026-02-12T02:17:10.958576+01:00","closed_at":"2026-02-12T02:17:10.958576+01:00","close_reason":"3 element-typer med render/hitTest oprettet: ug-hal, ug-stand, ug-udstiller","dependencies":[{"issue_id":"udstillerguide-whiteboard-qtg","depends_on_id":"udstillerguide-whiteboard-1t1","type":"blocks","created_at":"2026-02-12T02:15:07.67511+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-r31","title":"Deploy-script til whiteboard.udstillerguide.dk","description":"Opret et deploy.sh script der automatiserer deployment til whiteboard.udstillerguide.dk serveren (46.225.103.197). Scriptet skal: git push til origin, SSH til serveren, git pull, og docker compose up --build -d.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:29:49.583123+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:34:11.43935+01:00","closed_at":"2026-02-11T21:34:11.439551+01:00"}
{"id":"udstillerguide-whiteboard-rcg","title":"Implementér Error Handling med Beads-integration","description":"Tilføj et komplet error handling system til whiteboard-projektet der:\n1. Fanger alle runtime-fejl (JS frontend + Rust backend)\n2. Logger fejl struktureret til PostgreSQL\n3. Automatisk opretter Beads tasks fra uløste fejl\n\n## Trin\n1. Opdater CLAUDE.md med Error Handling Policy\n2. Database migration: error_log tabel + grouped view\n3. Rust backend: AppError, error logging, POST /api/errors endpoint, middleware\n4. JavaScript frontend: ErrorHandler klasse med global catchers, wrap/wrapSync, toast UI\n5. Beads-integration: errors-to-beads.sh script der opretter epics fra uløste fejl\n6. Self-review (Rule of Five) på alle komponenter","status":"closed","priority":1,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:42:16.748596+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:49:33.066559+01:00","closed_at":"2026-02-11T21:49:33.066559+01:00","close_reason":"Implemented all 6 steps: CLAUDE.md policy, error_log migration, Rust AppError+logging+endpoint, JS ErrorHandler with global catchers and toast UI, SyncManager WS error reporting, errors-to-beads.sh script"}
{"id":"udstillerguide-whiteboard-rny","title":"Omskriv sync.js til ægte Yjs-integration","description":"Fuld omskrivning af SyncManager. Ny version ejer Y.Doc + Y.Map('elements'), bruger y-websocket WebSocketProvider til sync, Awareness til cursors/presence. Fjern al custom JSON element-protokol og reconnect-logik. Tilføj sync status events (synced/syncing/disconnected). Se docs/plans/2026-02-11-yjs-frontend-migration-design.md","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:09.037874+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:39:58.333143+01:00","closed_at":"2026-02-11T22:39:58.333143+01:00","close_reason":"Full rewrite of sync.js: Y.Doc + Y.Map + WebSocketProvider + Awareness. Backward-compatible API.","dependencies":[{"issue_id":"udstillerguide-whiteboard-rny","depends_on_id":"udstillerguide-whiteboard-05p","type":"blocks","created_at":"2026-02-11T22:32:22.984797+01:00","created_by":"johannesdb"}]}

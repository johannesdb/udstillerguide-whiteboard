{"id":"udstillerguide-whiteboard-05p","title":"Vendor Yjs + y-websocket ESM builds","description":"Download ESM builds af yjs og y-websocket fra npm. Placér i backend/static/js/vendor/yjs.mjs og y-websocket.mjs. Verificér at de kan importeres som ES modules.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:06.418132+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:37:30.273046+01:00","closed_at":"2026-02-11T22:37:30.273046+01:00","close_reason":"Vendored yjs.mjs (93KB) and y-websocket.mjs (14KB) to static/js/vendor/. Added import map in board.html."}
{"id":"udstillerguide-whiteboard-0yz","title":"Persist viewport state (zoom/pan) per board","description":"Camera state (zoom, pan x/y) resets to default (100%, 0,0) on every page load. Should persist per board so users return to their last viewport position. Options: localStorage keyed by boardId, or Yjs awareness/separate Y.Map key.","status":"closed","priority":3,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:14:41.857394+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:18:02.421167+01:00","closed_at":"2026-02-11T23:18:02.421167+01:00","close_reason":"Implemented viewport persistence via localStorage, keyed by boardId. Camera zoom/pan saved with 300ms debounce, restored on board load. Verified working in production."}
{"id":"udstillerguide-whiteboard-2c6","title":"Mulighed for at nulstille share-kode på et board","description":"Brugere skal kunne nulstille/regenerere share-koden for et board, så gamle links bliver ugyldige. Nyttigt ved sikkerhedsbehov eller hvis koden er delt med forkerte personer.","status":"in_progress","priority":3,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:18:56.803191+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:20:09.17596+01:00"}
{"id":"udstillerguide-whiteboard-2gc","title":"Sticky notes: vælg farve ved oprettelse i chain mode","description":"Når man opretter sticky notes i chain mode, bør man kunne vælge farve for hver sticky note. I dag bruges altid den sidst valgte stickyColor. Tilføj en hurtig farvevælger (f.eks. med tal-genveje 1-5 for forskellige farver) så man kan skifte farve undervejs i chain mode uden at bryde flowet.","status":"tombstone","priority":2,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:39:41.772158+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:41:24.491944+01:00","deleted_at":"2026-02-11T21:41:24.491944+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"udstillerguide-whiteboard-5g3","title":"Google OAuth login (udover email/password)","description":"Tilføj Google Login som alternativ til email/password auth.\n\n## Krav\n1. Google Cloud Console: Opret OAuth 2.0 credentials (Client ID + Secret)\n2. Backend (Rust/Axum):\n   - GET /api/auth/google → redirect til Google consent screen\n   - GET /api/auth/google/callback → modtag auth code, bytte til tokens, hent brugerinfo, generer JWT\n   - Tilføj oauth2 + reqwest crates\n3. Database:\n   - Udvid users tabel med google_id (nullable)\n   - Gør password_hash nullable (Google-only brugere har ikke password)\n4. Frontend:\n   - 'Log ind med Google' knap på login-siden\n   - Håndter redirect callback og gem JWT token\n5. Edge cases:\n   - Link Google til eksisterende email/password-konto\n   - Bruger der allerede findes med samme email\n\n## Tech\n- oauth2 crate til Rust OAuth flow\n- reqwest til Google API kald\n- Eksisterende JWT-system genbruges efter Google-validering","status":"in_progress","priority":2,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T23:19:53.738323+01:00","created_by":"johannesdb","updated_at":"2026-02-11T23:20:40.052451+01:00"}
{"id":"udstillerguide-whiteboard-9b5","title":"End-to-end test af Yjs-migration","description":"Test fuld flow: opret elementer, flyt, slet, reload side (persistence), to browsere (collaboration), cursor-sync via Awareness, reconnect efter disconnect, undo/redo. Verificér at backend logger decoded Y.Map ændringer.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:17.638861+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:50:19.997986+01:00","closed_at":"2026-02-11T22:50:19.997986+01:00","close_reason":"Frontend loads correctly: imports resolve, y-websocket connects, error handling works, UI renders. Rust: 27/27 tests pass. Full e2e with DB requires deployed environment.","dependencies":[{"issue_id":"udstillerguide-whiteboard-9b5","depends_on_id":"udstillerguide-whiteboard-ktc","type":"blocks","created_at":"2026-02-11T22:32:23.719719+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-a3m","title":"Opdater tools.js til ny SyncManager API","description":"Gennemgå tools.js for direkte kald til sync/WebSocket. Opdater til at bruge den nye SyncManager API (addElement/updateElement/removeElement via Y.Map).","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:13.65269+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:39:58.666377+01:00","closed_at":"2026-02-11T22:39:58.666377+01:00","close_reason":"No changes needed - SyncManager API is backward-compatible, tools.js works as-is.","dependencies":[{"issue_id":"udstillerguide-whiteboard-a3m","depends_on_id":"udstillerguide-whiteboard-rny","type":"blocks","created_at":"2026-02-11T22:32:23.287936+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-cyv","title":"Deploy-script bruger VERSION=dev i stedet for git-hash","description":"Docker-buildet erstatter ?v=X med ?v=VERSION i alle JS/CSS-filer, men deploy.sh sætter ikke GIT_HASH environment-variablen. Derfor serveres alle filer med ?v=dev, og Cloudflare CDN cacher den gamle version. deploy.sh skal sætte GIT_HASH til git rev-parse --short HEAD så cache-busting virker korrekt.","status":"closed","priority":2,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:50:14.77028+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:52:35.403001+01:00","closed_at":"2026-02-11T21:52:35.403001+01:00","close_reason":"Added GIT_HASH export in deploy.sh before docker compose build"}
{"id":"udstillerguide-whiteboard-e8h","title":"Migrér frontend til ægte Yjs-integration (Y.Doc + Y.Map + y-websocket)","description":"Fjern custom JSON-besked-protokollen (element_add/update/remove/sync_state) og erstat med ægte Yjs-klient i frontend. Elementer skal leve i et Y.Map i en Y.Doc, synkroniseret via y-websocket. Backend har allerede yrs-infrastruktur. Den nuværende løsning (JSON → Y.Map på server) virker men giver ikke CRDT conflict resolution, offline support eller granulær sync. Kodebasen er ny — gør arkitekturen rigtig nu før der bygges mere ovenpå.","status":"closed","priority":1,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:06:49.45617+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:50:20.145784+01:00","closed_at":"2026-02-11T22:50:20.145784+01:00","close_reason":"Migration complete: sync.js rewritten with Y.Doc+Y.Map+y-websocket+Awareness, backend stripped of JSON element handlers, vendor files added, all tests pass."}
{"id":"udstillerguide-whiteboard-fqu","title":"Opdater canvas.js til Y.Map-integration","description":"Opdater WhiteboardApp så element CRUD går via SyncManager/Y.Map. Tilføj Y.Map observer til at håndtere remote changes. Migrér undo/redo til Y.UndoManager. Vent på initial sync før første render. Behold elements[] array som lokal cache synced via observer.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:11.518634+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:39:58.499679+01:00","closed_at":"2026-02-11T22:39:58.499679+01:00","close_reason":"No changes needed - SyncManager API is backward-compatible, canvas.js works as-is.","dependencies":[{"issue_id":"udstillerguide-whiteboard-fqu","depends_on_id":"udstillerguide-whiteboard-rny","type":"blocks","created_at":"2026-02-11T22:32:23.135434+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-ktc","title":"Strip JSON element-handlers fra backend","description":"Fjern element_add, element_update, element_remove, sync_state og save_request JSON handlers fra handler.rs. Fjern initial JSON sync_state send. Behold join/leave JSON, binary sync, awareness forwarding, al persistence og auth. Tilføj decoded Y.Map logging.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:15.123922+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:42:46.128176+01:00","closed_at":"2026-02-11T22:42:46.128176+01:00","close_reason":"Stripped JSON element handlers from handler.rs. Added text/binary frame detection for join/leave. Added Y.Map logging. Compiles clean.","dependencies":[{"issue_id":"udstillerguide-whiteboard-ktc","depends_on_id":"udstillerguide-whiteboard-fqu","type":"blocks","created_at":"2026-02-11T22:32:23.432851+01:00","created_by":"johannesdb"},{"issue_id":"udstillerguide-whiteboard-ktc","depends_on_id":"udstillerguide-whiteboard-a3m","type":"blocks","created_at":"2026-02-11T22:32:23.575636+01:00","created_by":"johannesdb"}]}
{"id":"udstillerguide-whiteboard-m9m","title":"Elementer persisteres ikke mellem sessions","description":"Når man opretter elementer på et board og derefter lukker og genåbner boardet, er alle elementer væk. Yjs-dokumentet lever kun i hukommelsen og gemmes ikke til databasen. Elementer skal persisteres så de overlever server-genstart og session-skift.","status":"closed","priority":0,"issue_type":"bug","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:50:11.076138+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:01:22.438215+01:00","closed_at":"2026-02-11T22:01:22.438215+01:00","close_reason":"Fixed: element operations (add/update/remove/sync_state) now stored in Yjs Y.Map on backend. Existing encode/save/load persistence captures elements automatically. On connect, saved elements sent to client. 27/27 tests pass."}
{"id":"udstillerguide-whiteboard-r31","title":"Deploy-script til whiteboard.udstillerguide.dk","description":"Opret et deploy.sh script der automatiserer deployment til whiteboard.udstillerguide.dk serveren (46.225.103.197). Scriptet skal: git push til origin, SSH til serveren, git pull, og docker compose up --build -d.","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:29:49.583123+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:34:11.43935+01:00","closed_at":"2026-02-11T21:34:11.439551+01:00"}
{"id":"udstillerguide-whiteboard-rcg","title":"Implementér Error Handling med Beads-integration","description":"Tilføj et komplet error handling system til whiteboard-projektet der:\n1. Fanger alle runtime-fejl (JS frontend + Rust backend)\n2. Logger fejl struktureret til PostgreSQL\n3. Automatisk opretter Beads tasks fra uløste fejl\n\n## Trin\n1. Opdater CLAUDE.md med Error Handling Policy\n2. Database migration: error_log tabel + grouped view\n3. Rust backend: AppError, error logging, POST /api/errors endpoint, middleware\n4. JavaScript frontend: ErrorHandler klasse med global catchers, wrap/wrapSync, toast UI\n5. Beads-integration: errors-to-beads.sh script der opretter epics fra uløste fejl\n6. Self-review (Rule of Five) på alle komponenter","status":"closed","priority":1,"issue_type":"feature","owner":"johannes@alfanova.dk","created_at":"2026-02-11T21:42:16.748596+01:00","created_by":"johannesdb","updated_at":"2026-02-11T21:49:33.066559+01:00","closed_at":"2026-02-11T21:49:33.066559+01:00","close_reason":"Implemented all 6 steps: CLAUDE.md policy, error_log migration, Rust AppError+logging+endpoint, JS ErrorHandler with global catchers and toast UI, SyncManager WS error reporting, errors-to-beads.sh script"}
{"id":"udstillerguide-whiteboard-rny","title":"Omskriv sync.js til ægte Yjs-integration","description":"Fuld omskrivning af SyncManager. Ny version ejer Y.Doc + Y.Map('elements'), bruger y-websocket WebSocketProvider til sync, Awareness til cursors/presence. Fjern al custom JSON element-protokol og reconnect-logik. Tilføj sync status events (synced/syncing/disconnected). Se docs/plans/2026-02-11-yjs-frontend-migration-design.md","status":"closed","priority":1,"issue_type":"task","owner":"johannes@alfanova.dk","created_at":"2026-02-11T22:32:09.037874+01:00","created_by":"johannesdb","updated_at":"2026-02-11T22:39:58.333143+01:00","closed_at":"2026-02-11T22:39:58.333143+01:00","close_reason":"Full rewrite of sync.js: Y.Doc + Y.Map + WebSocketProvider + Awareness. Backward-compatible API.","dependencies":[{"issue_id":"udstillerguide-whiteboard-rny","depends_on_id":"udstillerguide-whiteboard-05p","type":"blocks","created_at":"2026-02-11T22:32:22.984797+01:00","created_by":"johannesdb"}]}

---
id: wb-12
title: "DELETE /api/boards/{id} returnerer 405 Method Not Allowed"
type: bug
status: open
priority: 1
created: 2026-02-11
---

# DELETE /api/boards/{id} returnerer 405 Method Not Allowed

Sletning af boards fejler i produktion med HTTP 405 Method Not Allowed.

## Reproducer

1. Opret en bruger og log ind
2. Opret et board
3. Gå til dashboard og klik "Delete" på boardet
4. Bekræft sletning i dialogen

## Forventet

Board slettes og forsvinder fra listen (HTTP 204).

## Faktisk

DELETE-requesten returnerer 405 Method Not Allowed. Boardet forbliver i listen.

## Mulig årsag

Reverse proxy (nginx/Caddy) eller webserver-konfiguration blokerer DELETE HTTP-metoden. Backend Rust-koden har ruten defineret korrekt, så fejlen er sandsynligvis i deployment-laget.

## Netværkslog

```
[DELETE] https://whiteboard.udstillerguide.dk/api/boards/{id} => [405]
```

## Investigation (2026-02-11)

**Diagnosis: Reverse proxy issue - NOT a code bug**

### Backend code verified correct

- Route defined at `main.rs:82`: `.route("/api/boards/{id}", delete(api::boards::delete_board))`
- Handler at `api/boards.rs:249`: properly checks auth, owner access, then deletes
- CORS at `main.rs:50-53`: `allow_methods(Any)` allows all HTTP methods including DELETE
- Axum 0.7.9 correctly merges method handlers for the same path pattern
- `tower_http::cors::CorsLayer` handles OPTIONS preflight automatically before reaching route handlers

### Root cause

The 405 Method Not Allowed is coming from the reverse proxy, not the Axum backend. The proxy configuration either:
1. Only forwards GET/POST methods and blocks DELETE
2. Uses exact path matching for `/api/boards` that doesn't include sub-paths like `/api/boards/{uuid}`
3. Has the path match a static file rule that doesn't support DELETE

### Fix required

The reverse proxy (Caddy/nginx) must be configured to forward ALL HTTP methods to the backend. See wb-14 for the complete recommended proxy configuration.

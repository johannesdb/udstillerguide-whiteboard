<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Top bar -->
    <div id="top-bar">
        <button class="top-btn" id="btn-back" title="Back to dashboard">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </button>
        <span id="board-name">Untitled Board</span>
        <span id="zoom-level">100%</span>
        <button class="top-btn" id="btn-undo" title="Undo (Ctrl+Z)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 10h10a5 5 0 0 1 0 10H9"/>
                <path d="M3 10l4-4M3 10l4 4"/>
            </svg>
        </button>
        <button class="top-btn" id="btn-redo" title="Redo (Ctrl+Shift+Z)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10H11a5 5 0 0 0 0 10h4"/>
                <path d="M21 10l-4-4M21 10l-4 4"/>
            </svg>
        </button>
        <button class="top-btn" id="btn-share" title="Share">Share</button>
    </div>

    <!-- Presence bar -->
    <div id="presence-bar"></div>

    <!-- Toolbar -->
    <div id="toolbar">
        <button class="tool-btn active" data-tool="select" title="Select (V)">
            <svg viewBox="0 0 24 24"><path d="M4 4l7 19 2.5-7.5L21 13z"/></svg>
        </button>
        <button class="tool-btn" data-tool="pan" title="Pan (H)">
            <svg viewBox="0 0 24 24"><path d="M12 2v4M12 18v4M2 12h4M18 12h4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
        </button>
        <div class="tool-separator"></div>
        <button class="tool-btn" data-tool="sticky" title="Sticky Note (S)">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M15 3v6h6"/></svg>
        </button>
        <button class="tool-btn" data-tool="rect" title="Rectangle (R)">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/></svg>
        </button>
        <button class="tool-btn" data-tool="circle" title="Circle (C)">
            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg>
        </button>
        <button class="tool-btn" data-tool="line" title="Line (L)">
            <svg viewBox="0 0 24 24"><line x1="5" y1="19" x2="19" y2="5"/></svg>
        </button>
        <button class="tool-btn" data-tool="arrow" title="Arrow (A)">
            <svg viewBox="0 0 24 24"><line x1="5" y1="19" x2="19" y2="5"/><polyline points="10 5 19 5 19 14"/></svg>
        </button>
        <div class="tool-separator"></div>
        <button class="tool-btn" data-tool="draw" title="Draw (D)">
            <svg viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/></svg>
        </button>
        <button class="tool-btn" data-tool="text" title="Text (T)">
            <svg viewBox="0 0 24 24"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
        </button>
        <div class="tool-separator"></div>
        <button class="tool-btn" data-tool="color" title="Color">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9" fill="currentColor" stroke="currentColor"/>
            </svg>
        </button>
        <button class="tool-btn" data-tool="stroke-width" title="Stroke Width">
            <svg viewBox="0 0 24 24"><line x1="4" y1="8" x2="20" y2="8" stroke-width="1"/><line x1="4" y1="14" x2="20" y2="14" stroke-width="3"/><line x1="4" y1="20" x2="20" y2="20" stroke-width="5"/></svg>
        </button>
    </div>

    <!-- Color picker panel -->
    <div id="color-picker">
        <div class="color-swatch active" data-color="#333333" style="background:#333333"></div>
        <div class="color-swatch" data-color="#F44336" style="background:#F44336"></div>
        <div class="color-swatch" data-color="#2196F3" style="background:#2196F3"></div>
        <div class="color-swatch" data-color="#4CAF50" style="background:#4CAF50"></div>
        <div class="color-swatch" data-color="#FFF176" style="background:#FFF176"></div>
        <div class="color-swatch" data-color="#F48FB1" style="background:#F48FB1"></div>
        <div class="color-swatch" data-color="#81D4FA" style="background:#81D4FA"></div>
        <div class="color-swatch" data-color="#A5D6A7" style="background:#A5D6A7"></div>
        <div class="color-swatch" data-color="#CE93D8" style="background:#CE93D8"></div>
        <div class="color-swatch" data-color="#FFCC80" style="background:#FFCC80"></div>
        <div class="color-swatch" data-color="#FFFFFF" style="background:#FFFFFF; border: 1px solid #ccc"></div>
    </div>

    <!-- Stroke width picker -->
    <div id="stroke-picker">
        <label>Stroke: <span id="stroke-value">2</span>px</label>
        <input type="range" id="stroke-range" min="1" max="20" value="2">
    </div>

    <!-- Text input overlay -->
    <div id="text-input-overlay">
        <textarea id="text-input" rows="1"></textarea>
    </div>

    <!-- Canvas -->
    <div id="canvas-container">
        <canvas id="canvas"></canvas>
    </div>

    <script type="module">
        import { WhiteboardApp } from '/js/canvas.js';

        const params = new URLSearchParams(window.location.search);
        const boardId = params.get('id');
        const shareToken = params.get('share');

        if (!boardId && !shareToken) {
            window.location.href = '/';
        }

        const app = new WhiteboardApp('canvas', {
            boardId,
            shareToken,
        });
    </script>
</body>
</html>

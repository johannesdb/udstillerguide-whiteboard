<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Top bar -->
    <div id="top-bar">
        <button class="top-btn" id="btn-back" title="Back to dashboard">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </button>
        <span id="board-name">Untitled Board</span>
        <span id="zoom-level">100%</span>
        <button class="top-btn" id="btn-undo" title="Undo (Ctrl+Z)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 10h10a5 5 0 0 1 0 10H9"/>
                <path d="M3 10l4-4M3 10l4 4"/>
            </svg>
        </button>
        <button class="top-btn" id="btn-redo" title="Redo (Ctrl+Shift+Z)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10H11a5 5 0 0 0 0 10h4"/>
                <path d="M21 10l-4-4M21 10l-4 4"/>
            </svg>
        </button>
        <button class="top-btn" id="btn-share" title="Share">Share</button>
    </div>

    <!-- Presence bar -->
    <div id="presence-bar"></div>

    <!-- Toolbar -->
    <div id="toolbar">
        <!-- Selection & Navigation -->
        <button class="tool-btn active" data-tool="select" title="Select (V)">
            <svg viewBox="0 0 24 24"><path d="M4 4l7 19 2.5-7.5L21 13z"/></svg>
        </button>
        <button class="tool-btn" data-tool="pan" title="Pan (H)">
            <svg viewBox="0 0 24 24"><path d="M12 2v4M12 18v4M2 12h4M18 12h4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>
        </button>

        <div class="tool-separator"></div>

        <!-- Post-it / Sticky Note -->
        <button class="tool-btn" data-tool="sticky" title="Sticky Note (S)">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" fill="#FFF176" stroke="#E6D96A" stroke-width="1.5"/><path d="M15 3v6h6" fill="#E6D96A" stroke="none"/><line x1="7" y1="10" x2="17" y2="10" stroke="#999" stroke-width="1"/><line x1="7" y1="14" x2="14" y2="14" stroke="#999" stroke-width="1"/></svg>
        </button>
        <!-- Text Box -->
        <button class="tool-btn" data-tool="textbox" title="Text Box">
            <svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="16" rx="2" fill="none"/><line x1="7" y1="9" x2="17" y2="9" stroke-width="1.5"/><line x1="7" y1="13" x2="15" y2="13" stroke-width="1.5"/><line x1="7" y1="17" x2="12" y2="17" stroke-width="1.5"/></svg>
        </button>

        <div class="tool-separator"></div>

        <!-- Shapes -->
        <button class="tool-btn" data-tool="rect" title="Rectangle (R)">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="1"/></svg>
        </button>
        <button class="tool-btn" data-tool="circle" title="Circle (C)">
            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg>
        </button>
        <button class="tool-btn" data-tool="triangle" title="Triangle">
            <svg viewBox="0 0 24 24"><polygon points="12,3 22,21 2,21" fill="none"/></svg>
        </button>
        <button class="tool-btn" data-tool="diamond" title="Diamond">
            <svg viewBox="0 0 24 24"><polygon points="12,2 22,12 12,22 2,12" fill="none"/></svg>
        </button>
        <button class="tool-btn" data-tool="hexagon" title="Hexagon">
            <svg viewBox="0 0 24 24"><polygon points="12,2 21,7 21,17 12,22 3,17 3,7" fill="none"/></svg>
        </button>
        <button class="tool-btn" data-tool="star" title="Star">
            <svg viewBox="0 0 24 24"><polygon points="12,2 15,9 22,9 16.5,14 18.5,21 12,17 5.5,21 7.5,14 2,9 9,9" fill="none"/></svg>
        </button>

        <div class="tool-separator"></div>

        <!-- Lines -->
        <button class="tool-btn" data-tool="line" title="Line (L)">
            <svg viewBox="0 0 24 24"><line x1="5" y1="19" x2="19" y2="5"/></svg>
        </button>
        <button class="tool-btn" data-tool="arrow" title="Arrow (A)">
            <svg viewBox="0 0 24 24"><line x1="5" y1="19" x2="19" y2="5"/><polyline points="10 5 19 5 19 14"/></svg>
        </button>

        <div class="tool-separator"></div>

        <!-- Drawing & Text -->
        <button class="tool-btn" data-tool="draw" title="Draw (D)">
            <svg viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/></svg>
        </button>
        <button class="tool-btn" data-tool="text" title="Text (T)">
            <svg viewBox="0 0 24 24"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
        </button>

        <div class="tool-separator"></div>

        <!-- Style controls -->
        <button class="tool-btn" data-tool="color" title="Stroke Color">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9" fill="currentColor" stroke="currentColor"/>
            </svg>
        </button>
        <button class="tool-btn" data-tool="fill-color" title="Fill Color">
            <svg viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="2" fill="#eee" stroke="currentColor" stroke-width="2"/>
                <path d="M4 14l8-8 8 8" fill="currentColor" opacity="0.3"/>
            </svg>
        </button>
        <button class="tool-btn" data-tool="stroke-width" title="Stroke Width">
            <svg viewBox="0 0 24 24"><line x1="4" y1="8" x2="20" y2="8" stroke-width="1"/><line x1="4" y1="14" x2="20" y2="14" stroke-width="3"/><line x1="4" y1="20" x2="20" y2="20" stroke-width="5"/></svg>
        </button>
    </div>

    <!-- Stroke color picker panel -->
    <div id="color-picker">
        <div class="color-swatch active" data-color="#333333" style="background:#333333"></div>
        <div class="color-swatch" data-color="#F44336" style="background:#F44336"></div>
        <div class="color-swatch" data-color="#2196F3" style="background:#2196F3"></div>
        <div class="color-swatch" data-color="#4CAF50" style="background:#4CAF50"></div>
        <div class="color-swatch" data-color="#FF9800" style="background:#FF9800"></div>
        <div class="color-swatch" data-color="#9C27B0" style="background:#9C27B0"></div>
        <div class="color-swatch" data-color="#FFFFFF" style="background:#FFFFFF; border: 1px solid #ccc"></div>
    </div>

    <!-- Fill color picker panel -->
    <div id="fill-picker">
        <div class="color-swatch active" data-color="transparent" style="background:repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%) 50%/8px 8px; border:1px solid #ccc"></div>
        <div class="color-swatch" data-color="#FFF176" style="background:#FFF176"></div>
        <div class="color-swatch" data-color="#F48FB1" style="background:#F48FB1"></div>
        <div class="color-swatch" data-color="#81D4FA" style="background:#81D4FA"></div>
        <div class="color-swatch" data-color="#A5D6A7" style="background:#A5D6A7"></div>
        <div class="color-swatch" data-color="#CE93D8" style="background:#CE93D8"></div>
        <div class="color-swatch" data-color="#FFCC80" style="background:#FFCC80"></div>
        <div class="color-swatch" data-color="#FFFFFF" style="background:#FFFFFF; border: 1px solid #ccc"></div>
    </div>

    <!-- Stroke width picker -->
    <div id="stroke-picker">
        <label>Stroke: <span id="stroke-value">2</span>px</label>
        <input type="range" id="stroke-range" min="1" max="20" value="2">
    </div>

    <!-- Text input overlay -->
    <div id="text-input-overlay">
        <textarea id="text-input" rows="1"></textarea>
    </div>

    <!-- Canvas -->
    <div id="canvas-container">
        <canvas id="canvas"></canvas>
    </div>

    <script type="module">
        import { WhiteboardApp } from '/js/canvas.js';

        const params = new URLSearchParams(window.location.search);
        const boardId = params.get('id');
        const shareToken = params.get('share');

        if (!boardId && !shareToken) {
            window.location.href = '/';
        }

        const app = new WhiteboardApp('canvas', {
            boardId,
            shareToken,
        });
    </script>
</body>
</html>
